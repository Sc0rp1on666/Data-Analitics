<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd ">
    <changeSet id="create user entity" author="Dev_user">
        <createTable tableName="user">
            <column name="user_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="idnp" type="varchar(13)"/>
            <column name="seria" type="varchar(9)"/>
            <column name="first_name" type="varchar(40)"/>
            <column name="last_name" type="varchar(40)"/>
            <column name="email" type="varchar(40)"/>
            <column name="secret_word" type="varchar(40)"/>
            <column name="address" type="varchar(40)"/>
            <column name="password" type="varchar(256)"/>
            <column name="date_of_birth" type="date"/>
            <column name="created_date" type="datetime"/>
        </createTable>
    </changeSet>

    <changeSet id="create role entity" author="Dev_role">
        <createTable tableName="role">
            <column name="user_role_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="user_role_name" type="varchar(40)"/>
            <column name="user_id" type="int"/>
        </createTable>
    </changeSet>

    <changeSet id="create audit entity" author="Dev_Audit">
        <createTable tableName="audit">
            <column name="audit_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="operation_name" type="varchar(40)"/>
            <column name="initial_value" type="varchar(40)"/>
            <column name="changed_value" type="varchar(40)"/>
            <column name="create_date" type="date"/>
            <column name="created_by" type="varchar(40)"/>
            <column name="modified_date" type="date"/>
            <column name="modified_by" type="varchar(40)"/>
        </createTable>
    </changeSet>

    <changeSet id="create currency entity" author="Dev_currency">
        <createTable tableName="currency">
            <column name="currency_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="first_currency" type="varchar(4)"/>
            <column name="second_currency" type="varchar(4)"/>
            <column name="exchange_rate" type="double"/>
        </createTable>
    </changeSet>

    <changeSet id="create custom configuration entity" author="Dev_config">
        <createTable tableName="custom_configuration">
            <column name="configuration_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="configuration_name" type="varchar(40)"/>
            <column name="configuration_value" type="int"/>
        </createTable>
    </changeSet>

    <changeSet id="create transaction entity" author="Dev_transaction">
        <createTable tableName="transaction">
            <column name="transaction_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="transaction_type" type="varchar(20)"/>
            <column name="transaction_status" type="varchar(20)"/>
            <column name="transaction_sender_account_id" type="int"/>
            <column name="transaction_receiver_account_id" type="int"/>
            <column name="transaction_currency_type" type="varchar(7)"/>
            <column name="transaction_amount" type="double"/>
            <column name="transaction_reason_message" type="varchar(255)"/>
            <column name="transaction_date" type="date"/>
        </createTable>
    </changeSet>

    <changeSet id="create transaction account entity" author="Dev_trans_account">
        <createTable tableName="transaction_account">
            <column name="transaction_account_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="account_id" type="int"/>
            <column name="card_number" type="varchar(40)"/>
            <column name="card_vendor_type" type="varchar(40)"/>
            <column name="IBAN" type="varchar(40)"/>
            <column name="bank_name" type="varchar(50)"/>
            <column name="bank_address" type="varchar(50)"/>
            <column name="BIC" type="varchar(11)"/>
        </createTable>
    </changeSet>

    <changeSet id="create account entity" author="Dev_account">
        <createTable tableName="account">
            <column name="account_id" type="int" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="user_id" type="int"/>
            <column name="IBAN" type="varchar(40)"/>
            <column name="account_type" type="varchar(30)"/>
            <column name="account_status" type="varchar(40)"/>
            <column name="account_currency_type" type="varchar(6)"/>
            <column name="account_amount" type="double"/>
            <column name="expiry_date" type="date"/>
            <column name="created_date" type="date"/>
        </createTable>
    </changeSet>

<!--    <changeSet id="add unique key to user" author="Dev_user">-->
<!--        <addUniqueConstraint tableName="user" columnNames="user_id"/>-->
<!--    </changeSet>-->

<!--    <changeSet id="add unique key to role entity" author="Dev_role">-->
<!--        <addUniqueConstraint tableName="role" columnNames="user_role_id"/>-->
<!--    </changeSet>-->

<!--    <changeSet id="add unique key to audit entity" author="Dev_audit">-->
<!--        <addUniqueConstraint tableName="audit" columnNames="audit_id"/>-->
<!--    </changeSet>-->

<!--    <changeSet id="add unique key to currency entity" author="Dev_currency">-->
<!--        <addUniqueConstraint tableName="currency" columnNames="currency_id"/>-->
<!--    </changeSet>-->

<!--    <changeSet id="add unique key to configuration entity" author="Dev_currency">-->
<!--        <addUniqueConstraint tableName="custom_configuration" columnNames="configuration_id"/>-->
<!--    </changeSet>-->

    <changeSet id="add unique key to transaction account entity" author="Dev_trans_account">
        <addUniqueConstraint tableName="transaction_account" columnNames="account_id, card_number "/>
    </changeSet>

    <changeSet id="add unique key to account entity" author="Dev_account">
        <addUniqueConstraint tableName="account" columnNames="user_id, IBAN"/>
    </changeSet>


</databaseChangeLog>